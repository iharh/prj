plugins {
    id 'java'
}

def cld2LibDir =  "${libsDir}/cld2/shared"

repositories {
    mavenCentral()
    maven {
        url project.'nexus.repo'
    }
}

configurations {
    cld2cfg
}

dependencies {
    cld2cfg 'clarabridge:cld2-windows:1.0.0'

    testCompile 'junit:junit:4.12'
}

test {
    // https://docs.gradle.org/current/dsl/org.gradle.api.tasks.testing.Test.html 
    systemProperty 'java.library.path', cld2LibDir
}

task cpCld2(type: Copy) {
    shouldRunAfter testClasses
    from configurations.cld2cfg
    into cld2LibDir
}

test.dependsOn cpCld2
