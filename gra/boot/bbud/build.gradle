buildscript {
    repositories {
        gradlePluginPortal()
    }
    ext {
        springBootVersion = '2.1.8.RELEASE'
    }
    dependencies {
        classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
    }
}

ext {
    repoRootDir = "${rootProject.getRootDir()}/../.."
    gradleRootDir = "${repoRootDir}/gradle"
}

apply from: "${gradleRootDir}/repositories.gradle"
apply from: "${gradleRootDir}/dependencies.gradle"
apply from: "${gradleRootDir}/spring-boot.gradle"
apply from: "${gradleRootDir}/java8.gradle"
apply from: "${gradleRootDir}/lombok.gradle"
apply from: "${gradleRootDir}/junit.gradle"

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-actuator' // for manage

    implementation libraries.ehcache
    implementation libraries.cache_api

    implementation libraries.bytebuddy
    implementation libraries.bytebuddy_agent

    testImplementation 'org.springframework.boot:spring-boot-starter-test'

    // junit
    testImplementation libraries.junit_jupiter_api
    testImplementation libraries.junit_jupiter_params
    testRuntime libraries.junit_jupiter_engine
    // assertj
    testImplementation libraries.assertj_core
}

//bootJar {
//    manifest {
        //attributes "Agent-Class" : "cl.MyAgent"
        //attributes "Premain-Class" : "cl.MyAgent"

        //attributes "Can-Redefine-Classes" : "true"
        //attributes "Can-Retransform-Classes" : "true"
//    }
//}

bootRun {
    main = 'cl.App'
}
