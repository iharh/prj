plugins {
    id 'cpp-library'
}

apply from: "$gradleDir/native.gradle"

ext {
    javacppGenDir = "${project(':javawrapper').buildDir}/javacpp"
}

library {
    tasks.withType(CppCompile).configureEach {
        dependsOn(':javawrapper:generateJavacpp')
        includes.from(javaInclude, javaPlatformInclude)
        source.from(
            "$javacppGenDir/jnijavacpp.cpp",
            "$javacppGenDir/jniSimpleProviderLib.cpp"
        )
    }
}

// assembleRelease ... stripSymbolsRelease
// tasks.assemble.dependsOn('linkRelease')
