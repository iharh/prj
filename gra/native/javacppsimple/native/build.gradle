plugins {
    id 'cpp-library'
    // id 'maven-publish'
}

ext {
    repoRootDir = "${rootProject.getRootDir()}/../.."
    gradleRootDir = "${repoRootDir}/gradle"

    // TODO: move this stuff out to $gradleRootDir
    javaParent = file(System.getProperty("java.home")).getParentFile().getCanonicalFile()
    extractJavaDirForFile = { fileName -> fileTree(javaParent) { include "**/$fileName" }.getAt(0).getParentFile() }

    javaInclude = extractJavaDirForFile('jni.h')
    javaPlatformInclude = extractJavaDirForFile('jni_md.h')
}

library {
    tasks.withType(CppCompile).configureEach {
        includes.from(javaInclude, javaPlatformInclude)
    }
}

// assembleRelease ... stripSymbolsRelease
// tasks.assemble.dependsOn('linkRelease')
