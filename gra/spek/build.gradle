buildscript {
    ext {
        ver_kotlin = '1.1.1' // 1.0.6
        ver_junit_platform = '1.0.0-M3'
    }
    repositories {
        mavenLocal()
        jcenter()
        mavenCentral()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$ver_kotlin"
        classpath "org.junit.platform:junit-platform-gradle-plugin:$ver_junit_platform"
    }
}

apply plugin: 'org.junit.platform.gradle.plugin'
apply plugin: 'java'
apply plugin: 'kotlin'
//apply plugin: 'kotlin-kapt'
//apply plugin: 'idea'

junitPlatform {
    platformVersion ver_junit_platform
    filters {
        engines {
            include 'spek'
        }
    }
}

compileKotlin {
    kotlinOptions {
        jvmTarget = '1.8'
    }
}

repositories {
    mavenLocal()
    jcenter()
    mavenCentral()
    maven { url "http://dl.bintray.com/jetbrains/spek" }
}

ext {
    versions = [:]
    libraries = [:]
}

versions += [
    spek:       '1.1.0-beta4', // 1.1.19
    //kotlintest: '1.3.5' // 1.0.5 1.1.6 1.2.0 1.3.5 .. 1.3.6, 1.3.7 - require newer ver of kt
    hamkrest:   '1.1.0.0'
]

libraries += [
    spec_api:   "org.jetbrains.spek:spek-api:${versions.spek}",
    spec_junit_platform_engine: "org.jetbrains.spek:spek-junit-platform-engine:${versions.spek}",
    spec_subject_extension: "org.jetbrains.spek:spek-subject-extension:1.1.0-beta4",
    //kotlintest: "io.kotlintest:kotlintest:${versions.kotlintest}"
    hamkrest:   "com.natpryce:hamkrest:${versions.hamkrest}"
]

dependencies {
    //compile 'org.jetbrains.kotlin:kotlin-stdlib'
    //compile 'org.jetbrains.kotlin:kotlin-reflect'
    //testCompile 'com.natpryce:hamkrest'

    testCompile libraries.spec_api
    testCompile libraries.spec_junit_platform_engine
    testCompile libraries.spec_subject_extension
    //testCompile libraries.kotlintest
    testCompile libraries.hamkrest

    testCompile "org.junit.platform:junit-platform-console:${ver_junit_platform}"
}
